<!DOCTYPE html>
<html lang="zh-hant">

<head>
    <meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous">//jquery</script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"
        integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T"
        crossorigin="anonymous">//bootstrap 4</script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
    <title>下週有沒有空</title>
</head>

<body>
    <template id="timeSlotTemplate">
        <div class="card mb-2">
            <div class="card-body">
                <div class="row form-group justify-content-between">
                    <div class="card-title">
                        <h4 class="ml-3" id="title" contenteditable="true">有空的時段</h4>
                    </div>
                    <button class="btn btn-danger ml-5" onclick="removeCard(this.closest('.card'))">X</button>
                </div>
                <div class="custom-control custom-switch">
                    <input type="checkbox" class="custom-control-input" id="available" name="available" onclick="availableSwitch(this)">
                    <label class="custom-control-label" for="available">選擇沒空時段</label>
                </div>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">開始時間</span>
                    </div>
                    <select class="form-control col-6" id="startTime" name="startTime" onchange="handleTimeChange(this.closest('.card'))"></select>
                </div>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">結束時間</span>
                    </div>
                    <select class="form-control col-6" id="endTime" name="endTime"></select>
                </div>
                <div id="checkboxes" class="form-group mt-3">
                    <label>選擇欲套用的星期</label>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input ml-2" type="checkbox" id="normal" name="normal" value="normal" onclick="checkboxNormal(this)">
                        <label class="form-check-label" for="normal">平日</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input ml-2" type="checkbox" id="weekend" name="weekend" value="weekend" onclick="checkboxWeekend(this)">
                        <label class="form-check-label" for="weekend">週末</label>
                    </div>
                    <br>
                    <div id="days">
                        <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="monday" name="days" value="monday" onclick="checkNormal(this)">
                        <label class="form-check-label" for="monday">周一</label>
                        </div>
                        <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="tuesday" name="days" value="tuesday" onclick="checkNormal(this)">
                        <label class="form-check-label" for="tuesday">周二</label>
                        </div>
                        <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="wednesday" name="days" value="wednesday" onclick="checkNormal(this)">
                        <label class="form-check-label" for="wednesday">周三</label>
                        </div>
                        <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="thursday" name="days" value="thursday" onclick="checkNormal(this)">
                        <label class="form-check-label" for="thursday">周四</label>
                        </div>
                        <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="friday" name="days" value="friday" onclick="checkNormal(this)">
                        <label class="form-check-label" for="friday">周五</label>
                        </div>
                        <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="saturday" name="days" value="saturday" onclick="checkWeekend(this)">
                        <label class="form-check-label" for="saturday">周六</label>
                        </div>
                        <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="sunday" name="days" value="sunday" onclick="checkWeekend(this)">
                        <label class="form-check-label" for="sunday">周日</label>
                        </div>
                    </div>
                </div>
                <div class="row form-group justify-content-between">
                    <button id="save" class="btn btn-primary" onclick="saveTimeSlots(this.closest('.card'))">提交</button>
                    <div class="card-feet">
                        <button class="btn btn-light" onclick="moveUp(this.closest('.card'))">∧</button>
                        <button class="btn btn-light" onclick="moveDown(this.closest('.card'))">∨</button>
                    </div>
                </div>
                <label id="error" class="d-none text-danger"></label>
            </div>
        </div>
    </template>
    <nav id="navbar" class="navbar navbar-expand-md bg-dark navbar-info text-white">
        <div class="container">
            <i>下週有沒有空</i>
            <button class="btn btn-dark" onclick="window.location.href = `./intersection${window.location.search}`">
                共同時段計算
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-up-right" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8.636 3.5a.5.5 0 0 0-.5-.5H1.5A1.5 1.5 0 0 0 0 4.5v10A1.5 1.5 0 0 0 1.5 16h10a1.5 1.5 0 0 0 1.5-1.5V7.864a.5.5 0 0 0-1 0V14.5a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h6.636a.5.5 0 0 0 .5-.5"/>
                    <path fill-rule="evenodd" d="M16 .5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 0 0 1h3.793L6.146 9.146a.5.5 0 1 0 .708.708L15 1.707V5.5a.5.5 0 0 0 1 0z"/>
                </svg>
            </button>
        </div>
    </nav>
    <div class="container mt-2">
        <div class="row">
            <!-- <div class="col-md-6"></div> -->
            <div id="svg" class="col-md-6 mb-2 order-md-2 d-none">
                <div class="text-center d-none">
                    <label class="font-weight-bold" id="main_title">有空的時段</label>
                </div>
                <img id="calendarImage" class="col-12" alt="SVG周曆" />
            </div>
            <div class="col-md-6 mb-2 order-md-1">
                <button id="addTimeSlot" class="btn btn-primary mb-3" onclick="addTimeSlot()">新增 + </button>
                <button id="editButton" class="btn btn-warning mb-3 d-none" onclick="editTitle()">
                    標題
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pen" viewBox="0 0 16 16">
                        <path d="m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001m-.644.766a.5.5 0 0 0-.707 0L1.95 11.756l-.764 3.057 3.057-.764L14.44 3.854a.5.5 0 0 0 0-.708z"/>
                    </svg>
                </button>
                <button id="shareButton" class="btn btn-light mb-3 d-none" onclick="shareButton()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-share" viewBox="0 0 16 16">
                        <path d="M13.5 1a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.5 2.5 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5m-8.5 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3m11 5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3"/>
                    </svg>
                    分享圖片
                </button>
                <p id="main"></p>
            </div>
        </div>
    </div>
    <script src="./js/calendarSVG.js"></script>
    <script src="./js/base65.js"></script>
    <script src="./js/convert.js"></script>
    <script src="./js/card_control.js"></script>
    <script src="./js/index.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('./service-worker.js').then(function(registration) {
                    console.log('ServiceWorker registration successful with scope: ', registration.scope);
                }, function(error) {
                    console.log('ServiceWorker registration failed: ', error);
                });
            });
        }
    </script>
</body>

</html>