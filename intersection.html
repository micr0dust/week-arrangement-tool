<!DOCTYPE html>
<html lang="zh-hant">

<head>
    <meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous">//jquery</script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"
        integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T"
        crossorigin="anonymous">//bootstrap 4</script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
    <title>下週有沒有空</title>
</head>

<body>
    <template id="scheduleBlockTemplate">
        <div class="card mb-2" data-type="scheduleBlock">
            <div class="card-body">
                <div class="row form-group justify-content-between">
                    <div class="card-title">
                        <h4 class="ml-3" id="title" contenteditable="true">別人的時間表</h4>
                    </div>
                    <button class="btn btn-danger ml-5" onclick="removeCard(this.closest('.card'))">X</button>
                </div>
                <div class="row justify-content-center">
                    <img id="scheduleImage" class="col-12 d-none" alt="SVG周曆" />
                    <a id="url_display" class="d-none">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link" viewBox="0 0 16 16">
                            <path d="M6.354 5.5H4a3 3 0 0 0 0 6h3a3 3 0 0 0 2.83-4H9q-.13 0-.25.031A2 2 0 0 1 7 10.5H4a2 2 0 1 1 0-4h1.535c.218-.376.495-.714.82-1z"/>
                            <path d="M9 5.5a3 3 0 0 0-2.83 4h1.098A2 2 0 0 1 9 6.5h3a2 2 0 1 1 0 4h-1.535a4 4 0 0 1-.82 1H12a3 3 0 1 0 0-6z"/>
                        </svg>
                        開啟時間表
                    </a>
                </div>
                <div id="ipt" class="input-group mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text">網址</span>
                    </div>
                    <input id="url" type="text" class="form-control" autocomplete="off" placeholder="輸入時間表網址">
                </div>
                <div class="row form-group justify-content-between">
                    <button id="save" class="btn btn-primary ml-3" onclick="saveScheduleBlock(this.closest('.card'))">提交</button>
                    <!-- <div class="card-feet">
                        <button class="btn btn-light" onclick="moveUp(this.closest('.card'))">∧</button>
                        <button class="btn btn-light" onclick="moveDown(this.closest('.card'))">∨</button>
                    </div> -->
                </div>
                <label id="error" class="d-none text-danger"></label>
            </div>
        </div>
    </template>
    <nav id="navbar" class="navbar navbar-expand-md bg-dark navbar-info text-white">
        <div class="container">
            <i>共同時間計算</i>
            <button class="btn btn-dark" onclick="window.location.href = `./${window.location.search}`">
                編輯個人時間表
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-left" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M6 12.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6.5 2h8A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 12.5v-2a.5.5 0 0 1 1 0z"/>
                    <path fill-rule="evenodd" d="M.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L1.707 7.5H10.5a.5.5 0 0 1 0 1H1.707l2.147 2.146a.5.5 0 0 1-.708.708z"/>
                </svg>
            </button>
        </div>
    </nav>
    <div class="container mt-2">
        <div class="row">
            <div id="svg" class="col-md-6 mb-2 order-md-2 d-none">
                <div class="text-center d-none">
                    <label class="font-weight-bold" id="main_title">共同有空的時段</label>
                </div>
                <img id="calendarImage" class="col-12" alt="SVG周曆" />
            </div>
            <div class="col-md-6 mb-2 order-md-1">
                <button id="addScheduleBlock" class="btn btn-primary mb-3 ml-3" onclick="addScheduleBlock()">新增 + </button>
                <button id="shareButton" class="btn btn-light mb-3 ml-3 d-none" onclick="shareButton()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-share" viewBox="0 0 16 16">
                        <path d="M13.5 1a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.5 2.5 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5m-8.5 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3m11 5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3"/>
                    </svg>
                    分享圖片
                </button>
                <p id="main"></p>
            </div>
        </div>
    </div>
    <script src="./js/calendarSVG.js"></script>
    <script src="./js/base65.js"></script>
    <script src="./js/convert.js"></script>
    <script src="./js/card_control.js"></script>
    <script src="./js/intersection.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('./service-worker.js').then(function(registration) {
                    console.log('ServiceWorker registration successful with scope: ', registration.scope);
                }, function(error) {
                    console.log('ServiceWorker registration failed: ', error);
                });
            });
        }
    </script>
</body>

</html>